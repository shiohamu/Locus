# AGENTS.md

## 開発環境の指針

* 本プロジェクトは **ローカルファースト** を前提とする。
* ランタイムおよびパッケージ管理は **Bun** を使用する。
* 依存関係のインストールは `bun install` を用いる。
* 開発サーバーはプロジェクトルートで `bun dev` を実行する。
* バックエンドは **Hono** を使用し、不要なフレームワークや抽象化は追加しない。
* フロントエンドは **Svelte** を使用し、外部状態管理ライブラリの導入は避ける。
* ファイル構成や命名は既存のものを尊重し、推測で変更しないこと。

## テストに関する指示

* CI の内容は `.github/workflows` 配下を確認すること。
* コミット前に必ず以下をローカルで実行する：

  * `bun test`
* TypeScript の型エラーはすべて解消すること（無視・回避は禁止）。
* テストが失敗した場合は、テストを弱めるのではなく実装を修正すること。
* 振る舞いを変更した場合は、必ずテストを追加または更新する。
* ファイル移動や import 変更後は、再度テストを実行して退行がないことを確認する。

## PR / コミット指針

* コミットは小さく、目的を一つに絞ること。
* 無関係な変更を同一コミットに含めない。
* すべてのテストが成功し、ビルド可能な状態でのみコミットする。
* 明示的に要求されていない限り、見た目やフォーマットのみの変更は行わない。
* 抽象化を増やすより、不要なコードを削除することを優先する。

## ドキュメンテーション規則（重要）

* **公開 API、重要な関数、型、インターフェースには必ず TSDoc を記載すること。**
* TSDoc には以下を含める：

  * 役割・目的の簡潔な説明
  * 引数（`@param`）と戻り値（`@returns`）の意味
  * 副作用や注意点があれば明記
* 内部実装向けの自明なコードには過剰なコメントを付けない。
* コメントは実装と矛盾しないよう、変更時は必ず更新する。

## 一般的なコーディングルール

* 読みやすく、地味で明示的なコードを書くこと。
* 巧妙さよりも可読性と保守性を優先する。
* 依存関係は最小限に保つ。
* 既存のコードスタイル・パターンに必ず合わせる。
* 求められていない説明文や雑談は出力しない（コードまたは必要なファイルのみ）。
